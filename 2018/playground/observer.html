<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>observer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta name="description" content="" />
  <meta name="keywords" content="" />
</head>
<body>
<script src="https://cdn.bootcss.com/lodash.js/4.17.4/lodash.min.js"></script>
<script src="https://cdn.bootcss.com/vue/2.3.4/vue.min.js"></script>
<script>

let data = {
  a: 1,
  b: 2,
  c: 3
}
for (let k in data) {
  let val = data[k]
  Object.defineProperty(data, k, {
    enumerable: true,
    configurable: true,
    get: function () {
      return val
    },
    set: function (newVal) {
      if (val !== newVal) val = newVal
    }
  })
}



let deepData = {
  a: 1,
  b: 2,
  c: {
    d: 3,
    e: 4,
    f: {
      g: 5,
      h: 6,
      i: {
        j: 7,
        k: 8,
        l: 9
      }
    }
  }
}

let test = new Vue({
  el: 'body',
  data: Object.assign({}, deepData)
})

function walk (obj) {
  for (let key in obj) {
    let val = obj[key]
    if (val instanceof Object) {
      walk(val)
    }
    Object.defineProperty(obj, key, {
      enumerable: true,
      configurable: true,
      get: function () {
        console.log('getter ' + key)
        return val
      },
      set: function (newVal) {
        console.log('setter' + key, newVal)
        if (val !== newVal) val = newVal
      }
    })
  }
}

walk(deepData)

</script>

</body>
</html>